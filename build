#!/bin/bash

rm pkg_claw.zip
rm package/packages/*.zip

cd component && zip -r ../package/packages/com_claw.zip . && cd -

# prepare media directory
rm -rf media
mkdir -p media/js
mkdir -p media/css
cp media_raw/joomla.asset.json media
cp media_raw/js/*.js media/js
cp media_raw/js/*.js.map media/js

# Directories to append to main component package once admin is added
/usr/bin/zip -r package/packages/com_claw.zip media

cd library && /usr/bin/zip -r ../package/packages/lib_claw.zip . && cd -
#cd plugin    && zip -dr ../package/packages/plg_claw.zip . && cd -

cd package && /usr/bin/zip -r ../pkg_claw.zip . && cd -

# Build modules separately

cd modules/mod_claw_sponsors && /usr/bin/zip -r ../../package/packages/mod_claw_sponsors.zip . && cd -
cd modules/mod_claw_cart && /usr/bin/zip -r ../../package/packages/mod_claw_cart.zip . && cd -
